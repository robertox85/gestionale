<!DOCTYPE html>
<html class="h-100" lang="en">
<head>
    <meta charset="UTF-8">

    {% block head %}{% endblock %}

    <title>
        {% block title %}
            {{ title }}
        {% endblock %}
    </title>

    <link rel="stylesheet" href="{{ assets('css/app.css') }}">

    <script>
        // On page load or when changing themes, best to add inline in `head` to avoid FOUC
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark')
        }
    </script>

    <script src="{{ assets('js/app.js') }}" defer></script>
</head>
<body class="{{ getPageClass() }}">


{{ include('preloader.html.twig') }}

<div class="antialiased bg-gray-50 dark:bg-gray-900">


    {% if session.utente %}

        <!-- Top Navigation -->
        {% include('navigation.html.twig') %}

        <!-- Sidebar -->
        {% include('sidebar.html.twig') %}

    {% endif %}


    <main class="p-4 {% if session.utente %} md:ml-48 {% endif %} h-screen pt-20">

        <nav class="flex my-2" aria-label="Breadcrumb">
            <ol class="inline-flex items-center space-x-1 md:space-x-3">
                {% for breadcrumb in breadcrumbs %}
                    <li class="inline-flex items-center">
                        {% if breadcrumb.url %}
                            <a href="{{ breadcrumb.url }}" class="inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white">

                                <!-- if is home print home icon -->
                                {% if loop.first %}
                                    <svg class="w-3 h-3 mr-2.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/>
                                    </svg>
                                {% else %}
                                    <svg class="w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
                                    </svg>
                                {% endif %}
                                {{ breadcrumb.label }}
                            </a>
                        {% else %}
                            <div class="flex items-center">
                                <svg class="w-3 h-3 text-gray-400 mx-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 6 10">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 9 4-4-4-4"/>
                                </svg>
                                <span class="ml-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ml-2 dark:text-gray-400 dark:hover:text-white">{{ breadcrumb.label }}</span>
                            </div>
                        {% endif %}
                    </li>
                {% endfor %}
            </ol>
        </nav>


        {% if session.utente %}
            {% include('alerts.html.twig') %}
        {% endif %}

        {% block content %}{% endblock %}

    </main>
</div>


<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

{% block javascripts %}{% endblock %}

<!-- load only if in dev mode -->

{% if isLocalhost %}
    <script id="__bs_script__">//<![CDATA[
        (function () {
            try {
                var script = document.createElement('script');
                if ('async') {
                    script.async = true;
                }
                script.src = 'http://HOST:3000/browser-sync/browser-sync-client.js?v=2.29.1'.replace("HOST", location.hostname);
                if (document.body) {
                    document.body.appendChild(script);
                }
            } catch (e) {
                console.error("Browsersync: could not append script tag", e);
            }
        })()
        //]]>
    </script>
{% endif %}


</body>
</html>
